<!DOCTYPE html>
<html>
<% include ./partials/head %>

  <body class="d-flex flex-column min-vh-100">
    <% include ./partials/nav %>
      <div class="container-fluid">
        <p>Welcome <%= session.username %>
        </p>
        <div class="container mt-5">
          <div class="row d-flex justify-content-center">
            <div class="col-md-10">
              <div class="card p-3 py-4">
                <h5>Find a job</h5>
                <div class="row g-3 mt-2">
                  <div class="col-md-3">
                      <select class="form-select btn btn-primary" type="button"
                        id="industry" aria-placeholder="Industry" placeholder="Industry">
                        <option value="Any">Any</option>
                        <option class="dropdown-item" value="Computer Science">Computer Science</option>
                        <option class="dropdown-item" value="Media">Media</option>
                        <option class="dropdown-item" value="Medical">Medical</option>
                      </select>
                  </div>
                  <div class="col-sm-6">
                    <input id="position" type="text" class="form-control" placeholder="Job Title"
                      aria-label="Job Title">
                  </div>
                  <div class="col-md-3"> <button class="btn btn-primary btn-block">Search Results</button> </div>
                </div>
                <div class="mt-3"> <a data-bs-toggle="collapse" data-toggle="collapse" href="#collapseForm"
                    role="button" aria-expanded="false" aria-controls="collapseExample" class="advanced"> Advance Search
                    With Filters <i class="fa fa-angle-down"></i> </a>
                  <div class="collapse" id="collapseForm">
                    <div class="card card-body">
                      <div class="row">
                        <div class="col-sm"> 
                          <input type="text" id="organization" placeholder="Organization" aria-label="City" class="form-control"> </div>
                        <div class="col-sm">
                          <input type="text" id="city" class="form-control" placeholder="City" aria-label="City">
                        </div>
                        <div class="col-sm">
                          <input type="text" id="state" class="form-control" placeholder="State" aria-label="State">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="joblistContainer" class="container">
          <h2>Jobs</h2>
          <%- include('./partials/joblist',{jobs: jobs}) %>
        </div>
      </div>


      <% include ./partials/footer %>

      <% include ./partials/scripts %>
      <script>
        $.ajax({
            url: '/jobs_search',
            type: 'POST',
            cache: true,
            success: function (response) {
                var template = response['template'];
                var jobs = response['jobs'];
                var html = ejs.render(template, {jobs: jobs});
                $('#joblistContainer').html(html);
            },
            error: function (jqXHR, textStatus, err) {
                alert('text status ' + textStatus + ', err ' + err)
            }
        })
    </script>
  </body>

</html>